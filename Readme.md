Code explain on this page: http://www.wolinlabs.com/blog/stm32f4.adc.dsp.dac.html
